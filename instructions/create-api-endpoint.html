<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2024-11-09T13:22:59.1150952"><title>🌐 Defining the API Gateway | AWS Serverless Workshop</title><script type="application/json" id="virtual-toc-data">[{"id":"step-by-step-setting-up-api-gateway","level":0,"title":"📜 Step-by-Step: Setting Up API Gateway","anchor":"#step-by-step-setting-up-api-gateway"},{"id":"understanding-the-components","level":0,"title":"🧩 Understanding the Components","anchor":"#understanding-the-components"},{"id":"testing-and-deployment","level":0,"title":"🧪 Testing and Deployment","anchor":"#testing-and-deployment"},{"id":"congratulations","level":0,"title":"🎉 Congratulations!","anchor":"#congratulations"},{"id":"additional-resources","level":0,"title":"📚 Additional Resources","anchor":"#additional-resources"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b419/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="🌐 Defining the API Gateway | AWS Serverless Workshop"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="AWS Serverless Workshop Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation//1/create-api-endpoint.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="🌐 Defining the API Gateway | AWS Serverless Workshop"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation//1/create-api-endpoint.html#webpage",
    "url": "writerside-documentation//1/create-api-endpoint.html",
    "name": "🌐 Defining the API Gateway | AWS Serverless Workshop",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "AWS Serverless Workshop Help"
}</script><!-- End Schema.org --></head><body data-id="Create-API-Endpoint" data-main-title="🌐 Defining the API Gateway" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="main.md|Introduction"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>AWS Serverless Workshop 1 Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Create-API-Endpoint" id="Create-API-Endpoint.md">🌐 Defining the API Gateway</h1><p id="cq8td5_4"><span class="control" id="cq8td5_11">Now that we've created our <code class="code" id="cq8td5_12">createTodo</code> Lambda function, let's set up an API Gateway endpoint to allow HTTP requests to create new todo items in our app.</span></p><section class="chapter"><h2 id="step-by-step-setting-up-api-gateway" data-toc="step-by-step-setting-up-api-gateway">📜 Step-by-Step: Setting Up API Gateway</h2><section class="chapter"><h3 id="1-import-the-api-gateway-module" data-toc="1-import-the-api-gateway-module">1. <span class="control" id="cq8td5_19">Import the API Gateway Module</span></h3><ul class="list _bullet" id="cq8td5_18"><li class="list__item" id="cq8td5_20"><p id="cq8td5_23"><span class="control" id="cq8td5_24">What to do:</span> Add the API Gateway module to your stack file (<code class="code" id="cq8td5_25">lib/serverless-app-stack.ts</code>).</p></li><li class="list__item" id="cq8td5_21"><p id="cq8td5_26"><span class="control" id="cq8td5_27">Why?</span> This module lets us define and configure web API endpoints that can trigger our Lambda functions.</p></li><li class="list__item" id="cq8td5_22"><p id="cq8td5_28"><span class="control" id="cq8td5_30">How:</span></p><div class="code-block" data-lang="ts">
import * as apigateway from '@aws-cdk/aws-apigateway';
</div></li></ul></section><section class="chapter"><h3 id="2-define-the-api-gateway-rest-api" data-toc="2-define-the-api-gateway-rest-api">2. <span class="control" id="cq8td5_33">Define the API Gateway REST API</span></h3><ul class="list _bullet" id="cq8td5_32"><li class="list__item" id="cq8td5_34"><p id="cq8td5_37"><span class="control" id="cq8td5_38">What is it?</span> Think of API Gateway as the front door to your application.</p></li><li class="list__item" id="cq8td5_35"><p id="cq8td5_39"><span class="control" id="cq8td5_41">How:</span></p><div class="code-block" data-lang="ts">
const api = new apigateway.RestApi(this, 'TodoApi', {
  restApiName: 'Todo Service',
  description: 'This service handles todo operations.',
});
</div></li><li class="list__item" id="cq8td5_36"><p id="cq8td5_42"><span class="control" id="cq8td5_43">Explanation:</span> This code creates a new REST API called 'Todo Service' that will handle HTTP requests.</p></li></ul></section><section class="chapter"><h3 id="3-create-the-todos-resource" data-toc="3-create-the-todos-resource">3. <span class="control" id="cq8td5_46">Create the <code class="code" id="cq8td5_47">/todos</code> Resource</span></h3><ul class="list _bullet" id="cq8td5_45"><li class="list__item" id="cq8td5_48"><p id="cq8td5_51"><span class="control" id="cq8td5_52">What to do:</span> Add a resource path named <code class="code" id="cq8td5_53">/todos</code> to your API.</p></li><li class="list__item" id="cq8td5_49"><p id="cq8td5_54"><span class="control" id="cq8td5_55">Why?</span> This path will represent the endpoint for operations related to todo items.</p></li><li class="list__item" id="cq8td5_50"><p id="cq8td5_56"><span class="control" id="cq8td5_58">How:</span></p><div class="code-block" data-lang="ts">
const todos = api.root.addResource('todos');
</div></li></ul></section><section class="chapter"><h3 id="4-integrate-the-createtodo-lambda-function" data-toc="4-integrate-the-createtodo-lambda-function">4. <span class="control" id="cq8td5_62">Integrate the <code class="code" id="cq8td5_63">createTodo</code> Lambda Function</span></h3><ul class="list _bullet" id="cq8td5_60"><li class="list__item" id="cq8td5_64"><p id="cq8td5_67"><span class="control" id="cq8td5_68">What to do:</span> Connect the <code class="code" id="cq8td5_69">createTodo</code> Lambda function to handle POST requests on the <code class="code" id="cq8td5_70">/todos</code> endpoint.</p></li><li class="list__item" id="cq8td5_65"><p id="cq8td5_71"><span class="control" id="cq8td5_73">How:</span></p><div class="code-block" data-lang="ts">
const createTodoIntegration = new apigateway.LambdaIntegration(createTodoFunction);

todos.addMethod('POST', createTodoIntegration);
</div></li><li class="list__item" id="cq8td5_66"><p id="cq8td5_74"><span class="control" id="cq8td5_75">Explanation:</span> This sets up the API so that when a POST request is made to <code class="code" id="cq8td5_76">/todos</code>, it triggers the <code class="code" id="cq8td5_77">createTodo</code> Lambda function.</p></li></ul></section></section><section class="chapter"><h2 id="understanding-the-components" data-toc="understanding-the-components">🧩 Understanding the Components</h2><p id="cq8td5_78">Let's break down the key components to understand how they work together.</p><section class="chapter"><h3 id="api-gateway-restapi" data-toc="api-gateway-restapi"><span class="control" id="cq8td5_85">API Gateway (<code class="code" id="cq8td5_86">RestApi</code>)</span></h3><ul class="list _bullet" id="cq8td5_84"><li class="list__item" id="cq8td5_87"><p><span class="control" id="cq8td5_90">What is it?</span> A fully managed service that makes it easy to create, publish, and manage APIs.</p></li><li class="list__item" id="cq8td5_88"><p><span class="control" id="cq8td5_91">Analogy:</span> Think of it as a receptionist who directs incoming visitors (HTTP requests) to the correct department (Lambda functions).</p></li><li class="list__item" id="cq8td5_89"><p><span class="control" id="cq8td5_92">Role in our app:</span> Acts as the entry point for clients to interact with our backend services.</p></li></ul></section><section class="chapter"><h3 id="resource-todos" data-toc="resource-todos"><span class="control" id="cq8td5_95">Resource (<code class="code" id="cq8td5_96">/todos</code>)</span></h3><ul class="list _bullet" id="cq8td5_94"><li class="list__item" id="cq8td5_97"><p><span class="control" id="cq8td5_100">What is it?</span> A specific path in your API that represents a collection of todo items.</p></li><li class="list__item" id="cq8td5_98"><p><span class="control" id="cq8td5_101">Analogy:</span> Like a specific aisle in a supermarket dedicated to a category of products.</p></li><li class="list__item" id="cq8td5_99"><p><span class="control" id="cq8td5_102">Purpose:</span> Organizes API endpoints in a logical, hierarchical structure.</p></li></ul></section><section class="chapter"><h3 id="method-post" data-toc="method-post"><span class="control" id="cq8td5_105">Method (<code class="code" id="cq8td5_106">POST</code>)</span></h3><ul class="list _bullet" id="cq8td5_104"><li class="list__item" id="cq8td5_107"><p><span class="control" id="cq8td5_109">What is it?</span> An HTTP method that indicates the desired action to be performed.</p></li><li class="list__item" id="cq8td5_108"><p><span class="control" id="cq8td5_110">In our case:</span> The <code class="code" id="cq8td5_111">POST</code> method is used to create new todo items.</p></li></ul></section><section class="chapter"><h3 id="lambda-integration" data-toc="lambda-integration"><span class="control" id="cq8td5_115">Lambda Integration</span></h3><ul class="list _bullet" id="cq8td5_113"><li class="list__item" id="cq8td5_116"><p><span class="control" id="cq8td5_118">What is it?</span> Connects an API method to a Lambda function.</p></li><li class="list__item" id="cq8td5_117"><p><span class="control" id="cq8td5_119">Purpose:</span> When the API receives a request, it knows which Lambda function to invoke.</p></li></ul></section></section><section class="chapter"><h2 id="testing-and-deployment" data-toc="testing-and-deployment">🧪 Testing and Deployment</h2><section class="chapter"><h3 id="1-synthesize-the-cloudformation-template" data-toc="1-synthesize-the-cloudformation-template">1. <span class="control" id="cq8td5_125">Synthesize the CloudFormation Template</span></h3><ul class="list _bullet" id="cq8td5_124"><li class="list__item" id="cq8td5_126"><p id="cq8td5_128"><span class="control" id="cq8td5_130">How:</span> Run the following command in your terminal:</p><div class="code-block" data-lang="bash">
cdk synth
</div></li><li class="list__item" id="cq8td5_127"><p id="cq8td5_131"><span class="control" id="cq8td5_132">Why:</span> This generates a CloudFormation template so you can review the changes before deploying.</p></li></ul></section><section class="chapter"><h3 id="2-deploy-the-updated-stack" data-toc="2-deploy-the-updated-stack">2. <span class="control" id="cq8td5_135">Deploy the Updated Stack</span></h3><ul class="list _bullet" id="cq8td5_134"><li class="list__item" id="cq8td5_136"><p id="cq8td5_138"><span class="control" id="cq8td5_140">How:</span></p><div class="code-block" data-lang="bash">
cdk deploy
</div></li><li class="list__item" id="cq8td5_137"><p id="cq8td5_141"><span class="control" id="cq8td5_142">Note:</span> You'll be prompted to confirm the deployment. Type <code class="code" id="cq8td5_143">y</code> or <code class="code" id="cq8td5_144">yes</code>.</p></li></ul></section><section class="chapter"><h3 id="3-testing-the-endpoint" data-toc="3-testing-the-endpoint">3. <span class="control" id="cq8td5_148">Testing the Endpoint</span></h3><ul class="list _bullet" id="cq8td5_146"><li class="list__item" id="cq8td5_149"><p id="cq8td5_152"><span class="control" id="cq8td5_154">Locate the Endpoint URL:</span></p><ul class="list _bullet" id="cq8td5_153"><li class="list__item" id="cq8td5_155"><p>After deployment, the <code class="code" id="cq8td5_157">cdk deploy</code> command will output the API endpoint URL.</p></li><li class="list__item" id="cq8td5_156"><p>Alternatively, find it in the AWS Console under API Gateway.</p></li></ul></li><li class="list__item" id="cq8td5_150"><p id="cq8td5_158"><span class="control" id="cq8td5_160">Send a POST Request:</span></p><ul class="list _bullet" id="cq8td5_159"><li class="list__item" id="cq8td5_161"><p id="cq8td5_165"><span class="control" id="cq8td5_166">Use Tools:</span> You can use Postman, curl, or any HTTP client.</p></li><li class="list__item" id="cq8td5_162"><p id="cq8td5_167"><span class="control" id="cq8td5_168">Endpoint:</span> <code class="code" id="cq8td5_169">https://your-api-id.execute-api.your-region.amazonaws.com/prod/todos</code></p></li><li class="list__item" id="cq8td5_163"><p id="cq8td5_170"><span class="control" id="cq8td5_172">Headers:</span></p><ul class="list _bullet" id="cq8td5_171"><li class="list__item" id="cq8td5_173"><p><code class="code" id="cq8td5_174">Content-Type: application/json</code></p></li></ul></li><li class="list__item" id="cq8td5_164"><p id="cq8td5_175"><span class="control" id="cq8td5_177">Body:</span></p><div class="code-block" data-lang="json">
{
  &quot;id&quot;: &quot;unique-id&quot;,
  &quot;title&quot;: &quot;Sample Todo&quot;,
  &quot;description&quot;: &quot;This is a sample todo item.&quot;
}
</div></li></ul></li><li class="list__item" id="cq8td5_151"><p id="cq8td5_178"><span class="control" id="cq8td5_180">Expected Result:</span></p><ul class="list _bullet" id="cq8td5_179"><li class="list__item" id="cq8td5_181"><p>You should receive a response confirming the todo item was created.</p></li><li class="list__item" id="cq8td5_182"><p>Check your DynamoDB table to verify the item was added.</p></li></ul></li></ul></section></section><section class="chapter"><h2 id="congratulations" data-toc="congratulations">🎉 Congratulations!</h2><p id="cq8td5_183"><span class="control" id="cq8td5_186">You've successfully set up an API Gateway endpoint that allows clients to create new todo items!</span></p><ul class="list _bullet" id="cq8td5_184"><li class="list__item" id="cq8td5_187"><p id="cq8td5_189"><span class="control" id="cq8td5_191">What we've achieved:</span></p><ul class="list _bullet" id="cq8td5_190"><li class="list__item" id="cq8td5_192"><p>Enabled external HTTP requests to trigger our Lambda function.</p></li><li class="list__item" id="cq8td5_193"><p>Connected frontend requests to backend processing and data storage.</p></li></ul></li><li class="list__item" id="cq8td5_188"><p id="cq8td5_194"><span class="control" id="cq8td5_196">Why this is important:</span></p><ul class="list _bullet" id="cq8td5_195"><li class="list__item" id="cq8td5_197"><p>This setup forms the backbone of your serverless application, enabling scalable and efficient communication between clients and your services.</p></li></ul></li></ul></section><section class="chapter"><h2 id="additional-resources" data-toc="additional-resources">📚 Additional Resources</h2><ul class="list _bullet" id="cq8td5_198"><li class="list__item" id="cq8td5_199"><p><span class="control" id="cq8td5_203">Amazon API Gateway Documentation</span></p><ul class="list _bullet" id="cq8td5_204"><li class="list__item" id="cq8td5_205"><p>Learn more about API Gateway features: <a href="https://docs.aws.amazon.com/apigateway/latest/developerguide/welcome.html" id="cq8td5_206" data-external="true" rel="noopener noreferrer">API Gateway Docs</a></p></li></ul></li><li class="list__item" id="cq8td5_200"><p><span class="control" id="cq8td5_207">AWS CDK API Gateway Module</span></p><ul class="list _bullet" id="cq8td5_208"><li class="list__item" id="cq8td5_209"><p>Explore CDK's API Gateway constructs: <a href="https://docs.aws.amazon.com/cdk/api/latest/docs/aws-apigateway-readme.html" id="cq8td5_210" data-external="true" rel="noopener noreferrer">CDK API Gateway Module</a></p></li></ul></li><li class="list__item" id="cq8td5_201"><p><span class="control" id="cq8td5_211">Building Serverless APIs</span></p><ul class="list _bullet" id="cq8td5_212"><li class="list__item" id="cq8td5_213"><p>Hands-on guide: <a href="https://aws.amazon.com/getting-started/hands-on/build-serverless-app-lambda-apigateway/" id="cq8td5_214" data-external="true" rel="noopener noreferrer">AWS Serverless API Workshop</a></p></li></ul></li><li class="list__item" id="cq8td5_202"><p><span class="control" id="cq8td5_215">Best Practices for API Gateway</span></p><ul class="list _bullet" id="cq8td5_216"><li class="list__item" id="cq8td5_217"><p>Optimize your API: <a href="https://docs.aws.amazon.com/apigateway/latest/developerguide/best-practices.html" id="cq8td5_218" data-external="true" rel="noopener noreferrer">API Gateway Best Practices</a></p></li></ul></li></ul></section><div class="last-modified">Last modified: 09 November 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="createtodo.html" class="navigation-links__prev">🚀 Creating Lambda Functions</a><a href="recap.html" class="navigation-links__next">🏗️ Complete CDK Code: `createTodo` Reference</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b419/app.js"></script></body></html>